
Структура "Документ"
====================

Используется в модуле с версии 4.0.

*Элементы:*

* **ДатаЭДО** (тип Дата) — дата создания документа на сервере Диадока.
* **ДокументУчета** (тип ДокументСсылка, СправочникСсылка) — ссылка на документ в 1С, который сопоставлен с данным электронным документом.
* **Документооборот** (тип Структура) — содержит структуры, содержащие описание контента, титул покупателя и т.п. Используется внутри модуля.
* **ДопРеквизиты** (тип Структура) — дополнительные данные любого типа. Допустимо использование не более 5 реквизитов.
* **Заблокирован** (тип Булево) — признак того, что документ находится в составе заблокированного пакета. В таком пакете любая операция применяется ко всем документам сразу.
* **ИдентификаторВида** (тип Строка) — ID документа из события :doc:`ПолучитьТаблицуИспользуемыхВидовДокументов <../func/pm/Poluchit'TablitsuIspol'zuyemykhVidovDokumentov>`.
* **ИдентификаторВидаПакета** (тип Строка) — ID пакета из события :doc:`ПолучитьТаблицуИспользуемыхПакетов <../func/pm/Poluchit'TablitsuIspol'zuyemykhPaketov>`.
* **Идентификаторы** (тип Структура) — идентификаторы на сервере Диадока, характеризующие документ.
* **ИмяФайла** (тип Строка) — имя файла из метаданных документа.
* **Ключ** (тип Строка) — уникальный идентификатор структуры документа.
* **Метаданные** (тип Структура) — метаданные документа. Состав зависит от :doc:`типа контента <Tipy_Kontenta>` документа.
* **Направление** (тип Строка) — принимает значение "Исходящее" и "Входящее".
* **Отправитель** (тип Структура) — структура, описывающая участника ЭДО, от которого был отправлен пакет.
* **ПараметрыШаблона** (тип Структура) — идентификаторы на сервере Диадока, характеризующие документ из пакета-шаблона.
* **Получатель** (тип Структура) — структура, описывающая участника ЭДО, который получил пакет.
* **РезультатАнализа** (тип Структура) — содержит итоги анализа, выполненного в событии :doc:`ПровестиАнализДокумента <../func/pm/Provesti_Analiz_Dokumenta>` или :doc:`ПослеАнализаПакета <../func/pm/Posle_Analiza_Paketa>`.
* **Реквизиты** (тип Структура) — основные реквизиты документа.
* **Связи** (тип Структура) — идентификаторы документов из других пакетов, которые связаны с текущим документом.
* **СлужебнаяИнформация** (тип Структура) — вспомогательная структура, содержащая временные переменные.
* **Состояние** (тип Строка) — метка документа. Принимает значение "Подготовлен", "Отправлен", "ЗагруженИзДиадок", "Получен", "Переотправлен".
* **Статусы** (тип Структура) — состоит из строкового представления основного и дополнительного статуса документа.
* **Тип** (тип Структура) — описывает тип документа.
* **Шаблон** (тип Булево) — признак того, что документ находится в составе пакета-шаблона.
* **Комментарий** (тип Строка) — текст сообщения при отправке документа.

Структура **Идентификаторы**:

    * **BoxId** (тип Строка 36) — идентификатор ящика организации на сервере Диадока.
    * **LetterId** (тип Строка 36) — идентификатор пакета в ящике организации на сервере Диадока.
    * **DocumentId** (тип Строка 36) — идентификатор документа в ящике организации на сервере Диадока.
    * **ДокументЭДО** (тип СправочникСсылка.Диадок_Документы) — ссылка на описание электронного документа в базе 1С.
    * **ПакетЭДО** (тип СправочникСсылка.Диадок_ПакетыДокументов) — ссылка на описание электронного пакета в базе 1С.

Структура **Отправитель и Получатель**:

    * **BoxId** (тип Строка) — идентификатор ящика отправителя или получателя пакета на сервере Диадока.
    * **ОрганизацияЭДО** (тип СправочникСсылка.Диадок_ЮрФизЛица) — ссылка на организацию или контрагента в 1С.
    * **Организация** (тип СправочникСсылка) — ссылка на сопоставленную организацию или контрагента в базе 1С.
    * **FNSParticipantId** (тип Строка 47) — ФНС идентификатор участника электронного документоооборота.
    * **DepartmentId** (тип Строка 50) — идентификатор подразделения участника электронного документооборота.

Структура **ПараметрыШаблона**:

    * **MessageFromBoxId** (тип Строка) — идентификатор ящика отправителя документов, созданных на основе шаблонов.
    * **MessageToBoxId** (тип Строка) — идентификатор ящика получателя документов, созданных на основе шаблонов.
    * **MessageToDepartmentId** (тип Строка) — идентификатор подразделения получателя сообщения, которое будет создано на основе отправляемого шаблона.
    * **EditingSettingId** (тип Строка) — идентификатор настройки редактирования содержимого документа.
    * **LockMode** (тип Строка) — режим блокировки сообщения с шаблонами, доступны значения:

        * *None* — блокировка не производится.
        * *Send* — для документов пакета возможна только совместная отправка. Свойства залоченности работают по аналогии с закрытыми пакетами (режимом Full) и сохраняются до отправки пакета. После отправки пакета документов все ограничения на подокументную обработку снимаются.
        * *Full* — документы сообщения будут отправлены закрытым пакетом. В таком пакете любая операция применяется ко всем документам сразу.

Структура **РезультатАнализа**:

    * **АнализПроведен** (тип Булево) — признак завершения анализа документа.
    * **ТекстОшибки** (тип Строка) — любое строковое значение ошибки при выполнении анализа. Определяется в подключаемом модуле. Отображается в колонке "Ошибки проверки" в списке документов. Видимость ограничена 150 символами.
    * **ТребуемоеДействиеВ1С** (тип Строка 50) — строковое представление действия в 1С после анализа. Обрабатывается в событии :doc:`ВыполнитьТребуемоеДействие <../func/pm/Vypolnit'_Trebuyemoye_Deystviye>`.
    * **ТребуемоеДействиеВДД** (тип Строка 50) — строковое представление действия для отправки на сервер Диадока после анализа. Обрабатывается при нажатии на кнопку на форме "Отправить готовые ответы". Возможные варианты:

        * *Подписать*,
        * *ОтказатьВПодписи*,
        * *ЗапроситьУточнение*,
        * *Аннулировать*,
        * *ОтказатьВАннулировании*.

Структура **Реквизиты**:

    * **Дата** (тип Дата) — дата электронного документа из метаданных (DocumentDate).
    * **Номер** (тип Строка 30) — номер электронного документа из метаданных (DocumentNumber).
    * **Сумма** (тип Число 15,2) — сумма электронного документа из метаданных (TotalSum).
    * **СуммаНДС** (тип Число 15,2) — сумма НДС электронного документа из метаданных (TotalVat).
    * **КодВалюты** (тип Строка 4) — код валюты электронного документа из метаданных (CurrencyCode).

Структура **Связи**:

    * **InitialDocumentIds** (тип Массив) — идентификаторы документов, на которые ссылается данный документ.
    * **SubordinateDocumentIds** (тип Массив) — идентификаторы документов, которые ссылаются на данный документ.
    * **TransformedToLetterIds** (тип Массив) — идентификаторы пакетов, созданных на основе данного шаблона и содержащих данный документ.
    * **PacketId** (тип Строка 36) — идентификатор пакета Диадока, в котором в данный момент находится документ.
    * **CustomDocumentId** (тип Строка) — необязательный идентификатор документа во внешней системе. Используется для выстраивания связей между документами внутри отправляемого сообщения.
    * **OriginMessageId** (тип Строка) — идентификатор исходного шаблона.

Структура **Тип**:

    * **ТипДокумента** (тип Строка) — название :doc:`типа документа <Tipy_Dokumentov>`.
    * **ТипКонтента** (тип Строка) — название :doc:`типа контента <Tipy_Kontenta>`.
    * **ФункцияДокумента** (тип Строка) — для документов в формате УПД. Принимает значение InvoiceAndBasic / Invoice / Basic.
    * **Представление** (тип Строка) — представление типа документа на русском языке из списка :doc:`"Типы документа" <Tipy_Dokumentov>`.
    * **Формализованный** (тип Булево) — признак того, что документ в формате, утвержденном ФНС.
