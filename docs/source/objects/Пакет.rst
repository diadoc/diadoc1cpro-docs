
Структура "Пакет"
=================

2 версии структуры:

-  :ref:`Пакет_4.0`

-  :ref:`Пакет_до_4.0`

.. _Пакет_4.0:

Пакет (начиная с версии 4.0)
----------------------------

Пакет — структура, содержащая сведения о пакете документов. На текущий момент такая структура используется внутри модуля. В подключаемом модуле приходит дополненным до предыдущей версии структуры.

*Элементы:*

* **ДатаЭДО** (тип Дата) — дата создания пакета.
* **ДокументУчета** (тип ДокументСсылка, СправочникСсылка) — ссылка на документ в 1С, который является основанием для данного пакета.
* **Документы** (тип Массив) — массив :doc:`структур документов <Документ>`, входящих в состав пакета.
* **ДопРеквизиты** (тип Структура) — структура дополнительных данных любого типа, которые могут быть использованы в событие :doc:`ПодготовкиПакета <../func/pm/Podgotovit'Paket>` и после. Допустимо использование не более 5 реквизитов.
* **Заблокирован** (тип Булево) — признак того, что пакет заблокированный. В таком пакете любая операция применяется ко всем документам сразу.
* **ИдентификаторВида** (тип Строка 100) — ID пакета из события :doc:`ПолучитьТаблицуИспользуемыхПакетов <../func/pm/Poluchit'TablitsuIspol'zuyemykhPaketov>`.
* **Идентификаторы** (тип Структура) — структура идентификаторов на сервере Диадока, характеризующих пакет.
* **Направление** (тип Строка) — принимает значение "Исходящее" или "Входящее".
* **Отправитель** (тип Структура) — структура, описывающая участника ЭДО, от которого был отправлен пакет.
* **ПараметрыШаблона** (тип Структура) — структура идентификаторы на сервере Диадока, характеризующих пакет-шаблон.
* **Получатель** (тип Структура) — структура, описывающая участника ЭДО, который получил пакет.
* **Реквизиты** (тип Структура) — структура основных реквизитов. Для исходящих: реквизиты документа-основания пакета. Для входящих: реквизиты первого полученного документа пакета.
* **СлужебнаяИнформация** (тип Структура) — вспомогательная структура, содержащая временные переменные.
* **Состояние** (тип Строка) — принимает значение "Подготовлен", "Отправлен", "ЗагруженИзДиадок", "Получен", "Переотправлен".
* **Шаблон** (тип Булево) — признак того, что это пакет-шаблон.

Структура **Идентификаторы**:

    * **BoxId** (тип Строка 36) — идентификатор ящика организации.
    * **LetterId** (тип Строка 36) — идентификатор пакета Диадока в ящике организации.
    * **ПакетЭДО** (тип СправочникСсылка.Диадок_ПакетыДокументов) — ссылка на описание электронного пакета в базе 1С.

Структура **Отправитель / Получатель**:

    * **BoxId** (тип Строка) — идентификатор ящика отправителя или получателя пакета на сервере Диадока.
    * **ОрганизацияЭДО** (тип СправочникСсылка.Диадок_ЮрФизЛица) — ссылка на организацию или контрагента в 1С.
    * **Организация** (тип СправочникСсылка) — ссылка на сопоставленную организацию или контрагента в базе 1С.
    * **FNSParticipantId** (тип Строка 47) — ФНС идентификатор участника электронного документоооборота.
    * **DepartmentId** (тип Строка 50) — идентификатор подразделения участника электронного документоооборота.

Структура **ПараметрыШаблона**:

    * **MessageFromBoxId** (тип Строка) — идентификатор ящика отправителя документов, созданных на основе шаблонов.
    * **MessageToBoxId** (тип Строка) — идентификатор ящика получателя документов, созданных на основе шаблонов.
    * **MessageToDepartmentId** (тип Строка) — идентификатор подразделения получателя сообщения, которое будет создано на основе отправляемого шаблона.
    * **LockMode** (тип Строка) — режим блокировки сообщения с шаблонами, доступны значения:

        * *None* — блокировка не производится.
        * *Send* — для документов пакета возможна только совместная отправка. Свойства залоченности работают по аналогии с закрытыми пакетами (режимом Full) и сохраняются до отправки пакета. После отправки пакета документов все ограничения на подокументную обработку снимаются.
        * *Full* — документы сообщения будут отправлены закрытым пакетом. В таком пакете любая операция применяется ко всем документам сразу.

Структура **Реквизиты**:

    * **Дата** (тип Дата) — дата документа-основания исходящего пакета / дата первого документа входящего пакета.
    * **Номер** (тип Строка 30) — номер документа-основания исходящего пакета / номер первого документа входящего пакета.
    * **Сумма** (тип Число 15,2) — сумма документа-основания исходящего пакета / сумма первого документа входящего пакета.

Структура **СлужебнаяИнформация**:

    * **ОтложеннаяОтправка** (тип Булево) — признак того, что пакет сохранен на сервере Диадока без отправки контрагенту.
    * **ЗашифрованныйПакет** (тип Булево) — признак того, что пакет содержит зашифрованные документы.


.. _Пакет_до_4.0:

Пакет (до версии 4.0)
---------------------

Пакет — структура, содержащая сведения о пакете документов. Создание пустой структуры происходит в функции основного модуля ЭДО_ПакетДокументовМенеджер_СоздатьНовый().

*Элементы:*

* **Данные1С** (тип Структура) — структура Свойства1С, содержащая общие поля из 1С для всех документов пакета.
*	**Документы** (тип Массив) — массив структур для хранения сведений о каждом документе пакета: описание контента, тип документа, ссылка на документ в 1С и т.п.
* **ДополнительныеРеквизиты** (тип Структура) — структура дополнительных данных любого типа, которые могут быть использованы в событие ПодготовкиПакета и после. Допустимо использование не более 5 реквизитов.

Структура **Свойства1С**:

* **Организация** — ссылка на организацию в 1С, от лица которой сформирован пакет.
* **Контрагент** — ссылка на контрагента в 1С, которому предназначен пакет.
* **ПодразделениеОрганизации** — ссылка на организацию в 1С, являющуюся обособленным подразделением головной организации, от лица которой сформирован пакет.
* **ПодразделениеКонтрагента** — ссылка на подразделение контрагента в 1С, которому предназначен пакет.
* **ЭтоВнутреннийДокумент** — признак пакета с внутренними документами.
* **Ссылка** — ссылка на пакет в 1С.
* **ВидПакета** — ссылка на вид пакета в 1С.
* **ВидПакетаID** — внутренний идентификатор вида пакета.
* **Документ** — ссылка на документ в 1С, который является основным для данного пакета.
* **НомерДокумента** — номер документа в 1С.
* **ДатаДокумента** — дата документа в 1С.
* **СуммаДокумента** — сумма документа в 1С.
* **ПереотправляемыйПакетСсылка** — ссылка на переотправляемый пакет в 1С.
* **ПараметрыШаблона** — содержит поля:

    * **MessageFromBoxId** — идентификатор ящика отправителя документов, созданных на основе шаблонов.
    * **MessageToBoxId** — идентификатор ящика получателя документов, созданных на основе шаблонов.
    * **MessageToDepartmentId** — идентификатор подразделения получателя сообщения, которое будет создано на основе отправляемого шаблона.
    * **LockMode** — режим блокировки сообщения с шаблонами, доступны значения:

        * *None* — блокировка не производится.
        * *Send* — для документов пакета возможна только совместная отправка. Свойства залоченности работают по аналогии с закрытыми пакетами (режимом Full) и сохраняются до отправки пакета. После отправки пакета документов все ограничения на подокументную обработку снимаются.
        * *Full* — документы сообщения будут отправлены закрытым пакетом. В таком пакете любая операция применяется ко всем документам сразу.
