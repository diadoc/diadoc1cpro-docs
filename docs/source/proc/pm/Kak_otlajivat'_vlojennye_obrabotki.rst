
Как отладить вложенные обработки
================================

.. note::

	*Актуально в модуле с версии 4.6.*

Модуль представляет собой набор внешних обработок. Корневая обработка — Diadoc.epf. Вспомогательные обработки вложены в корневую в виде макетов. Некоторые вспомогательные обработки включают в себя другие обработки.

Для отладки вложенных обработок Универсального модуля выполните пункты 1-4.

Для отладки вложенных обработок встроенного модуля «Стандарт» выполняем инструкцию до конца.

**Порядок отладки:**

1. Сохраняем модуль на диске (например, в каталоге «D:\\Debug\\Diadoc.epf»).

При работе в клиент-серверной базе обеспечьте доступ к файлу для пользователя, от имени которого запущен агент сервера 1С. Например, сервер 1С работает от имени пользователя service1c@mydomain. Тогда нужно разместить файл Diadoc.epf в сетевом каталоге (допустим, \\computername\\share), и дать доступ на чтение этого каталога пользователю service1c@mydomain.

2. Открываем модуль в режиме «1С:Предприятие». В меню «Настройки» — «Расширенные настройки» выбираем пункт «Системные»:

.. image:: /_static/Otladka_1.png
  :width: 600px

3. В открывшемся окне ставим флаг «Режим отладки». На вопрос о выгрузке вложенных обработок выбираем «Да» .

.. image:: /_static/Otladka_2.png
  :width: 500px


4. Вложенные обработки автоматически распаковываются в каталог «D:\\Debug», из которого открыта корневая обработка.

.. image:: /_static/Otladka_4.png
  :width: 400px

.. image:: /_static/Otladka_5.png
  :width: 300px

5. Нажимаем «Сохранить» и перезапускаем модуль. 

  .. image:: /_static/Otladka_6.png
    :width: 400px
 
6. При следующем запуске в заголовке должно быть написано «Режим отладки»:

  .. image:: /_static/Otladka_7.png
    :width: 600px

**Дальнейшие действия нужны для отладки вложенных обработок модуля «Стандарт».**

7. Создаем подкаталог для отладки модуля «Стандарт». В него будут выгружены вложенные обработки модуля «Стандарт» (например, «D:\\Debug\\standart»).

8. Через конфигуратор открываем обработку, соответствующую конфигурации, из «D:\\Debug\\include».

9. Чтобы модуль «Стандарт» подключался в режиме отладки, нужно в модуле объекта ПМ внести следующие исправления в метод «ТиповойМодульДиадока()»:

      * ставим «РежимОтладки = Истина;»
      * указываем каталог, созданный в п.7 («D:\\Debug\\standart»).

.. image:: /_static/Otladka_8.png
  :width: 700px

10.   Выполняем требуемые действия в режиме «1С:Предприятие». При первом обращении к методам вложенных обработок модуля «Стандарт» в подкаталоге («D:\\Debug\\standart») будут созданы используемые обработки:

  .. image:: /_static/Otladka_9.png
    :width: 400px
  
11.   Для проверки ставим точку останова на нужной строке кода и вызываем меню «Отладка» — «Начать отладку». Например, в интеграционном модуле «D:\\Debug\\standart\\include\\Модуль_ИнтеграцияБП30.epf».

  .. image:: /_static/Otladka_10.png
    :width: 500px
